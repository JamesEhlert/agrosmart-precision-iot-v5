; PlatformIO Project Configuration File
; Projeto: AgroSmart Precision System V5 (Firmware)
; Hardware: ESP32-WROOM-32 (DevKit V1)

[platformio]
default_envs = esp32doit-devkit-v1

[env:esp32doit-devkit-v1]
platform = espressif32
board = esp32doit-devkit-v1
framework = arduino

monitor_speed = 115200
monitor_filters =
  time
  esp32_exception_decoder

; Se o firmware começar a bater no limite de flash, descomente:
; board_build.partitions = huge_app.csv

; Flags de build para facilitar testes sem editar o main.cpp
; - DEFAULT_TELEMETRY_INTERVAL_MS: intervalo de coleta/envio (ms)
; - ENABLE_OLED: 1 protótipo, 0 campo
; - LOG_LEVEL: 0 quiet, 1 info, 2 debug
build_flags =
  -D FW_VERSION=\"5.17.3\"
  -D DEFAULT_TELEMETRY_INTERVAL_MS=30000
  -D ENABLE_OLED=1
  -D LOG_LEVEL=2

; Se você mudou o DEFAULT_TELEMETRY_INTERVAL_MS mas o boot ainda imprime tele_int antigo,
; é porque o NVS está prevalecendo. Duas opções:
; 1) apagar flash/NVS: pio run -t erase
; 2) forçar defaults sem apagar seq/offset: descomente a flag abaixo
; -D NVS_FORCE_CONFIG_DEFAULTS=1

lib_deps =
  adafruit/Adafruit AHTX0 @ ^2.0.5
  adafruit/Adafruit Unified Sensor @ ^1.1.15
  adafruit/Adafruit BusIO @ ^1.17.4
  adafruit/RTClib @ ^2.1.4
  adafruit/Adafruit GFX Library @ ^1.12.4
  adafruit/Adafruit SSD1306 @ ^2.5.16
  knolleary/PubSubClient @ ^2.8.0
  bblanchon/ArduinoJson @ ^6.21.5
; ============================================================================
; AgroSmart Precision IoT V5 (ESP32)
; PlatformIO Project Configuration
; ============================================================================
;
; DICA: se você estiver usando o "platformio device monitor", use o filtro
; esp32_exception_decoder (e REMOVA "colorize", que não existe nessa versão).
;
; Para decodificar backtrace:
;   pio run -e esp32doit-devkit-v1 -t buildfs
;   pio run -e esp32doit-devkit-v1
;   pio device monitor -e esp32doit-devkit-v1 -f esp32_exception_decoder
;
; ============================================================================

[platformio]
default_envs = esp32doit-devkit-v1

[env]
platform = espressif32@^6.12.0
board = esp32doit-devkit-v1
framework = arduino

monitor_speed = 115200
monitor_filters =
  time
  esp32_exception_decoder

; Se você quiser logs mais verbosos do core do ESP32:
; build_flags = -DCORE_DEBUG_LEVEL=3

lib_deps =
  adafruit/Adafruit AHTX0 @ ^2.0.5
  adafruit/Adafruit Unified Sensor @ ^1.1.15
  adafruit/Adafruit BusIO @ ^1.17.4
  adafruit/RTClib @ ^2.1.4
  adafruit/Adafruit GFX Library @ ^1.12.4
  adafruit/Adafruit SSD1306 @ ^2.5.16
  knolleary/PubSubClient @ ^2.8
  bblanchon/ArduinoJson @ ^6.21.5

; Build flags comuns (podem ser sobrescritas por environment)
build_flags =
  -D FW_VERSION=\"5.17.2\"
  -D DEFAULT_TELEMETRY_INTERVAL_MS=60000
  -D ENABLE_OLED=1

; ----------------------------------------------------------------------------
; ENV: Produção / uso normal
; ----------------------------------------------------------------------------
[env:esp32doit-devkit-v1]
; nada extra

; ----------------------------------------------------------------------------
; ENV: Stress / testes offline (intervalo bem curto)
; ----------------------------------------------------------------------------
[env:esp32doit-devkit-v1_stress]
build_flags =
  ${env.build_flags}
  -D DEFAULT_TELEMETRY_INTERVAL_MS=10000